
@model Forum.Web.Models.SectionViewModel


<div class="panel" style="margin:15px 15px; padding:5px 5px">
    <div class="panel-heading text-center"><h1>@Model.Name</h1></div>
    <table class="table table-striped col-md-2">
        <colgroup>
            <col>
            <col span="2" class="info">
            <col span="2" class="success">
        </colgroup>
        <thead class="thead-inverse">
            <tr>
                <th>Thread Name </th>
                <th class="text-center">Thread Author</th>
                <th class="text-center">Number of posts</th>

            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.threads.Skip((Model.pager.CurrentPage - 1) * Model.pager.PageSize).Take(Model.pager.PageSize))
            {
                <tr>
                    <td class="col-md-4">@Html.ActionLink(item.ThreadName, "ViewThread", "Thread", new { threadId = item.IdThread }, null)</td>
                    <td class="col-md-2 text-center">@Html.ActionLink(item.UserName, "Users", "User", new { userName = item.UserName }, null)</td>
                    <td class="col-md-2 text-center"> @Model.CountPosts(item.IdThread) </td>
                    @if (Model.User.IsInRole("Admin"))
                {
                        <td class="col-md-2" style="margin: 20px 20px">
                            <input type="submit" value="Remove Thread" class="btn btn-danger"  onclick="location.href='@Url.Action("RemoveThread", "Admin", new { threadId = item.IdThread }, null)'" />

                        </td>
                    }

                </tr>


            }
        </tbody>

    </table>
    <div class="container">
        <div class="col-md-6 col-md-offset-3">


            <!-- items being paged -->
            <!-- pager -->
            @if (Model.pager.EndPage > 1)
            {
                <ul class="pagination">
                    @if (Model.pager.CurrentPage > 1)
                {
                        <li>
                            @Html.ActionLink("First", "ViewSection")

                        </li>
                        <li>
                            @Html.ActionLink("Previous", "ViewSection", new { page = Model.pager.CurrentPage - 1, sectionId = Model.sectionId })

                        </li>
                    }

                    @for (var page = Model.pager.StartPage; page <= Model.pager.EndPage; page++)
                {
                        <li class="@(page == Model.pager.CurrentPage ? "active" : "")">
                            @Html.ActionLink(page.ToString(), "ViewSection", new { page = page, sectionId = Model.sectionId })

                        </li>
                    }

                    @if (Model.pager.CurrentPage < Model.pager.TotalPages)
                {
                        <li>

                            @Html.ActionLink("Next", "ViewSection",  new { page = Model.pager.CurrentPage + 1, sectionId = Model.sectionId })
                        </li>
                        <li>
                            @Html.ActionLink("Last", "ViewSection", new { page = Model.pager.TotalPages, sectionId = Model.sectionId })

                        </li>
                    }
                </ul>}
        </div>
    </div>
    <div class="btn" style="margin: 20px 20px">
        <input type="submit" value="AddThread" class="btn btn-success" onclick="location.href='@Url.Action("AddThread", "Thread", new { sectionId = Model.sectionId })'" />

    </div>
</div>
   